<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fresh Products - Greenly</title>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@600;700;800&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="../css/variables.css">
  <link rel="stylesheet" href="../css/base.css">
  <link rel="stylesheet" href="../css/components.css">
  <link rel="stylesheet" href="../css/freshmarket-theme.css">
</head>

<body>
  <!-- Navigation -->
  <nav class="navbar" style="background: white; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
    <div class="container navbar-container">
      <a href="../index.html" class="navbar-logo" style="display: flex; align-items: center; gap: 8px;">
        <span style="font-size: 28px;">ğŸŒ¿</span>
        <span style="font-weight: 700; font-size: 20px;">Greenly</span>
      </a>
      <ul class="navbar-menu" style="display: flex; align-items: center; gap: 32px; list-style: none;">
        <li><a href="products.html?category=vegetable"
            style="text-decoration: none; color: var(--text-dark); font-weight: 500;">Vegetables</a></li>
        <li><a href="products.html?category=fruit"
            style="text-decoration: none; color: var(--text-dark); font-weight: 500;">Fruits</a></li>
        <li><a href="vendors.html" style="text-decoration: none; color: var(--text-dark); font-weight: 500;">Vendors</a>
        </li>
        <li><a href="../index.html#scrap"
            style="text-decoration: none; color: var(--text-dark); font-weight: 500;">Scrap Services</a></li>
      </ul>
      <div style="display: flex; align-items: center; gap: 20px;">
        <div style="display: flex; align-items: center; gap: 6px; color: var(--text-medium); font-size: 14px;">
          <span>ğŸ“</span>
          <span>Bengaluru</span>
        </div>
        <a href="cart.html" style="position: relative; text-decoration: none;">
          <span style="font-size: 24px;">ğŸ›’</span>
          <span class="cart-count" id="cartCount"
            style="position: absolute; top: -8px; right: -8px; background: var(--primary); color: white; border-radius: 50%; width: 20px; height: 20px; display: flex; align-items: center; justify-content: center; font-size: 11px; font-weight: 700;">0</span>
        </a>
        <a href="login.html" class="btn"
          style="border: 2px solid var(--primary); color: var(--primary); background: white; padding: 8px 20px; border-radius: 8px; text-decoration: none; font-weight: 600;">
          ğŸ‘¤ Login
        </a>
      </div>
    </div>
  </nav>

  <!-- Page Header -->
  <section style="background: linear-gradient(135deg, #E8F5E9 0%, #F1F8E9 100%); padding: 60px 0;">
    <div class="container">
      <h1 style="font-size: 48px; margin-bottom: 16px;">ğŸŒ¿ Fresh Products</h1>
      <p style="font-size: 18px; color: var(--text-medium);">Farm fresh produce directly from local vendors</p>

      <div style="margin-top: 32px; display: flex; gap: 16px; flex-wrap: wrap;">
        <input type="text" id="searchInput" placeholder="ğŸ” Search products..."
          style="flex: 1; min-width: 300px; padding: 14px 20px; border: 2px solid var(--border-color); border-radius: 12px; font-size: 15px;">
        <div id="categoryFilters" style="display: flex; gap: 8px; flex-wrap: wrap;">
          <button class="filter-btn active" data-category="all"
            style="padding: 12px 20px; border: 2px solid var(--primary); background: var(--primary); color: white; border-radius: 12px; cursor: pointer; font-weight: 600;">All</button>
          <button class="filter-btn" data-category="vegetable"
            style="padding: 12px 20px; border: 2px solid var(--border-color); background: white; color: var(--text-dark); border-radius: 12px; cursor: pointer; font-weight: 600;">ğŸ¥•
            Vegetables</button>
          <button class="filter-btn" data-category="fruit"
            style="padding: 12px 20px; border: 2px solid var(--border-color); background: white; color: var(--text-dark); border-radius: 12px; cursor: pointer; font-weight: 600;">ğŸ
            Fruits</button>
          <button class="filter-btn" data-category="leafy"
            style="padding: 12px 20px; border: 2px solid var(--border-color); background: white; color: var(--text-dark); border-radius: 12px; cursor: pointer; font-weight: 600;">ğŸ¥¬
            Leafy</button>
          <button class="filter-btn" data-category="herbs"
            style="padding: 12px 20px; border: 2px solid var(--border-color); background: white; color: var(--text-dark); border-radius: 12px; cursor: pointer; font-weight: 600;">ğŸŒ¿
            Herbs</button>
        </div>
      </div>
    </div>
  </section>

  <!-- Products Grid -->
  <section class="section-new">
    <div class="container">
      <div id="productsGrid" class="grid-4"></div>
      <div id="emptyState" style="display: none; text-align: center; padding: 60px 20px;">
        <div style="font-size: 64px; margin-bottom: 20px;">ğŸ”</div>
        <h2>No products found</h2>
        <p style="color: var(--text-medium);">Try adjusting your search or filters</p>
      </div>
    </div>
  </section>

  <script>
    const products = [
      { id: 1, name: "Fresh Tomatoes", category: "vegetable", price: 40, unit: "kg", vendor: "Ram's Vegetable Stall", distance: 0.8, rating: 4.8, status: "Picked Today", emoji: "ğŸ…", bgColor: "var(--bg-light-pink)" },
      { id: 2, name: "Organic Apples", category: "fruit", price: 120, unit: "kg", vendor: "Fresh Fruits Corner", distance: 1.2, rating: 4.9, status: "Farm Fresh", emoji: "ğŸ", bgColor: "var(--bg-light-pink)" },
      { id: 3, name: "Spinach", category: "leafy", price: 25, unit: "bunch", vendor: "Green Leaves", distance: 0.9, rating: 4.7, status: "Morning Harvest", emoji: "ğŸ¥¬", bgColor: "var(--bg-light-green)" },
      { id: 4, name: "Fresh Coriander", category: "herbs", price: 15, unit: "bunch", vendor: "Herb Garden", distance: 0.9, rating: 4.6, status: "Just Picked", emoji: "ğŸŒ¿", bgColor: "var(--bg-light-green)" },
      { id: 5, name: "Bananas", category: "fruit", price: 50, unit: "dozen", vendor: "Tropical Fruits", distance: 1.8, rating: 4.7, status: "Ripe & Ready", emoji: "ğŸŒ", bgColor: "var(--bg-light-yellow)" },
      { id: 6, name: "Potatoes", category: "vegetable", price: 30, unit: "kg", vendor: "Ram's Vegetable Stall", distance: 0.8, rating: 4.5, status: "Farm Fresh", emoji: "ğŸ¥”", bgColor: "var(--bg-light-beige)" },
      { id: 7, name: "Lettuce", category: "leafy", price: 35, unit: "piece", vendor: "Green Leaves", distance: 0.9, rating: 4.6, status: "Crisp & Fresh", emoji: "ğŸ¥¬", bgColor: "var(--bg-light-green)" },
      { id: 8, name: "Mint Leaves", category: "herbs", price: 10, unit: "bunch", vendor: "Herb Garden", distance: 0.9, rating: 4.7, status: "Aromatic", emoji: "ğŸŒ¿", bgColor: "var(--bg-light-green)" },
      { id: 9, name: "Mangoes", category: "fruit", price: 150, unit: "kg", vendor: "Tropical Fruits", distance: 1.8, rating: 4.8, status: "Sweet & Juicy", emoji: "ğŸ¥­", bgColor: "var(--bg-light-orange)" },
      { id: 10, name: "Carrots", category: "vegetable", price: 45, unit: "kg", vendor: "Ram's Vegetable Stall", distance: 0.8, rating: 4.6, status: "Crunchy Fresh", emoji: "ğŸ¥•", bgColor: "var(--bg-light-orange)" },
      { id: 11, name: "Kale", category: "leafy", price: 40, unit: "bunch", vendor: "Green Leaves", distance: 0.9, rating: 4.7, status: "Nutrient Rich", emoji: "ğŸ¥¬", bgColor: "var(--bg-light-green)" },
      { id: 12, name: "Basil", category: "herbs", price: 20, unit: "bunch", vendor: "Herb Garden", distance: 0.9, rating: 4.8, status: "Fragrant", emoji: "ğŸŒ¿", bgColor: "var(--bg-light-green)" }
    ];

    let currentCategory = 'all';
    let searchTerm = '';

    function renderProducts() {
      const grid = document.getElementById('productsGrid');
      const emptyState = document.getElementById('emptyState');

      let filtered = products.filter(product => {
        const matchesCategory = currentCategory === 'all' || product.category === currentCategory;
        const matchesSearch = product.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
          product.vendor.toLowerCase().includes(searchTerm.toLowerCase());
        return matchesCategory && matchesSearch;
      });

      if (filtered.length === 0) {
        grid.style.display = 'none';
        emptyState.style.display = 'block';
        return;
      }

      grid.style.display = 'grid';
      emptyState.style.display = 'none';

      grid.innerHTML = filtered.map(product => `
        <div class="product-card-new" style="background: ${product.bgColor};">
          <span class="status-badge open">${product.status}</span>
          <div class="product-illustration">${product.emoji}</div>
          <div class="product-vendor-info">
            <span>ğŸ“ ${product.vendor}</span>
            <span>${product.distance} km</span>
          </div>
          <h3>${product.name}</h3>
          <div class="product-card-footer">
            <div class="product-price-new">
              â‚¹${product.price}<span class="unit">/${product.unit}</span>
            </div>
            <div class="product-rating">
              <span class="rating-star">â­</span> ${product.rating}
            </div>
          </div>
          <button class="btn btn-primary" onclick="addToCart(${product.id})" style="width: 100%; margin-top: 12px;">
            ğŸ›’ Add to Cart
          </button>
        </div>
      `).join('');
    }

    function addToCart(productId) {
      const product = products.find(p => p.id === productId);
      if (!product) return;

      const cart = getCart();
      const existingIndex = cart.findIndex(item => item.id === productId);

      if (existingIndex > -1) {
        cart[existingIndex].quantity += 1;
      } else {
        cart.push({
          id: product.id,
          name: product.name,
          price: product.price,
          unit: product.unit,
          vendor: product.vendor,
          image: product.emoji,
          quantity: 1
        });
      }

      saveCart(cart);

      const toast = document.createElement('div');
      toast.textContent = `âœ… ${product.name} added to cart!`;
      toast.style.cssText = 'position:fixed;top:20px;right:20px;background:#00C853;color:white;padding:15px 25px;border-radius:12px;z-index:9999;box-shadow:0 4px 12px rgba(0,0,0,0.15);font-weight:600;';
      document.body.appendChild(toast);
      setTimeout(() => toast.remove(), 2000);
    }

    function getCart() {
      const cart = localStorage.getItem('cart');
      return cart ? JSON.parse(cart) : [];
    }

    function saveCart(cart) {
      localStorage.setItem('cart', JSON.stringify(cart));
      updateCartCount();
    }

    function updateCartCount() {
      const cart = getCart();
      const count = cart.reduce((total, item) => total + (item.quantity || 1), 0);
      document.getElementById('cartCount').textContent = count;
      document.getElementById('cartCount').style.display = count > 0 ? 'flex' : 'none';
    }

    // Category filter
    document.getElementById('categoryFilters').addEventListener('click', (e) => {
      if (e.target.classList.contains('filter-btn')) {
        document.querySelectorAll('.filter-btn').forEach(btn => {
          btn.style.background = 'white';
          btn.style.color = 'var(--text-dark)';
          btn.style.borderColor = 'var(--border-color)';
          btn.classList.remove('active');
        });
        e.target.style.background = 'var(--primary)';
        e.target.style.color = 'white';
        e.target.style.borderColor = 'var(--primary)';
        e.target.classList.add('active');
        currentCategory = e.target.dataset.category;
        renderProducts();
      }
    });

    // Search
    document.getElementById('searchInput').addEventListener('input', (e) => {
      searchTerm = e.target.value;
      renderProducts();
    });

    // Check URL params
    const urlParams = new URLSearchParams(window.location.search);
    const categoryParam = urlParams.get('category');
    if (categoryParam) {
      const btn = document.querySelector(`[data-category="${categoryParam}"]`);
      if (btn) btn.click();
    }

    // Initialize
    updateCartCount();
    renderProducts();
  </script>
</body>

</html>